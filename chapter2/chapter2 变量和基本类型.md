

# 2.1 基本内置类型

## 2.1.1 算数类型

一个int至少了一个`short`一样大，一个`long`至少和一个`int`一样大，一个`long long`至少了一个`long`一样大。

可寻址的最小内存块称为“字节（`byte`）”，存储的基本单元称为“字（`word`）”，它通常由几个字节组成。大多数机器的字节由8比特（`bit`）构成，字则由32或64比特构成，也就是4或8字节。

大多数计算机将内存中的每个字节与一个数字（被称为“地址（address）”）关联起来，我们能够使用某个地址来表示从这个地址开始的大小不同的比特串。

### 建议：如何选择类型

- 当明确知晓数值不可能为负时，选用无符号类型。
- 使用int执行整数运算，如果数值超过了`int`的表示范围，选用`long long`。
- 在算数表达式中不要使用`char`或`bool`，只有在存放字符或布尔值时才使用它们。
- 执行浮点运算选用`double`，这是因为`float`通常精度不够而且双精度浮点数和单精度浮点数的计算代价相差无几。

## 2.1.2 类型转换

当在程序的某处我们使用了一种类型而其实对象应该取另一种类型，程序会自动进行类型转换。

```c++
bool b = 42;            // b为真；bool b = 0，则b为假
int i = b;              // i的值是1
i = 3.14;               // i的值是3
double pi = i;          // pi的值是3.0
unsigned char c = -1;   // 假设char占8bit，c的值为255
signed char c2 = 256;   // 假设char占8bit，c的值是未定义的 
```

程序应该尽量避免依赖于实现环境的行为。如果我们把`int`的尺寸看成是一个确定不变的已知量，那么这样的程序就称作不可移植的（nonportable）。

```c++
// 死循环。变量i永远也不会小于0， 循环条件一直成立
for (unsigned i = 10; i >= 0; --i) {
    std::cout << i << std:endl;
}
```

切勿混合带符号类型和无符号类型。


## 2.1.3 字面值常量literal

```c++
20      // 十进制
024     // 八进制
0x14    // 十六进制
```

### 字符和字符串字面值

```c++
'a'     // 字符字面值，单引号
"Hello" // 字符串字面值，双引号

// 分多行书写的字符串字面值
cout << "a really, really long string literal "
     << "that spans two lines" << endl;
```

字符串字面值实际上是**常量字符构成的数组（array）**。编译器在每个字符串的结尾处添加一个空字符（"\0"），因此**字符串字面值的实际长度要比它的内容多1**。


### 转义序列

如果反斜线`\`后面跟着的八进制数字超过3个，只有前3个数字与`\`构成转义序列。相反，`\x`要用到后面跟着的所有数字。

### 布尔字面值和指针字面值

```c++
bool test = false;
int *p = nullptr;
```


# 2.2 变量

## 2.2.1 变量定义

对象是具有某种数据类型的内存空间。

在C++中，初始化和赋值是两个完全不同的操作。初始化的含义是创建变量时赋予其一个初始值，而赋值的含义是把对象的当前值**擦除**，而以一个新值来替代。

### 列表初始化（list initialization）

```c++
int units_unsold{0}
```
当用于内置类型的变量时，这种初始化形式有一个**重要特点：如果我们使用列表初始化且初始值存在丢失信息的风险，则编译器将报错。**

```c++
long double ld = 3.1415926536
int a{ld}, b = {ld};   // 错误：转换未执行，因为存在丢失信息的风险
int c(ld), d = ld;     // 正确：转换执行，且确实丢失了部分信息
```

### 默认初始化

如果内置类型的变量未被显示初始化，它的值由定义的位置决定。定义于任何函数体之外的变量被初始化为0。定义于函数体内部的内置类型变量将不被初始化。一个未被初始化的内置类型变量的值是未定义的，如果试图拷贝或以其他形式访问此类值将引发错误。


### 2.2.2 变量声明和定义的关系

为了支持分离式编译，c++语言将声明和定义区别开来。声明（declaration）使得名字为程序所知，一个文件如果想使用别处定义的名字则必须包含对那个名字的声明。而定义（definition）负责创建和名字关联的实体。

变量声明规定了变量的类型和名字，在这一点上定义与之相同。但是除此之外，定义还申请存储空间，也可能会为变量赋一个初始值。

```c++
extern int i;   // 声明i而非定义i
int j;          // 声明并定义j
extern double pi = 3.1416   // 定义
```

任何包含了显示初始值的声明即成为定义。extern语句如果包含初始值就不再是声明，而变成定义了。

在函数体内部，如果试图初始化一个由extern关键字标记的变量，将引发错误。

变量能且只能被定义一次，但是可以被多次声明。


### 2.2.3 标识符

标识符由由字母、数字和下划线组成，其中必须以字母或下划线开头。标识符长度没有限制，但是对大小写字母敏感。


